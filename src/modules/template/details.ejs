<!doctype html>
<html lang="es">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Detalle de Proyecto</title>
  
  <link rel="stylesheet" href="/css/body.css">
  <link rel="stylesheet" href="/css/projectDetail.css">
</head>

<body>
  <%- include('menu') %>

  <div class="project-detail">
  <div class="project-info">
    <p><%= project.date %></p>
    <h1><%= project.title %></h1>
    <p><%= project.project %></p>
    <p><%= project.course %></p>
  </div>

  <h2>Descripción</h2>
  <p><%- project.description.replace(/\n/g, '<br>') %></p>

  <h2>Miembros</h2>
  <div class="project-members">
    <% project.members.forEach(member => { %>
      <p><%= member %></p>
    <% }) %>
  </div>

  <% if (project.comments && project.comments.length > 0) { %>
    <h2>Comentarios de Jurados</h2>
    <div class="comments-carousel" id="comments-carousel">
      <% project.comments.forEach((c, idx) => { %>
        <div class="comment-item <%= idx === 0 ? 'active' : '' %>">
          <img src="/assets/<%= c.image || 'default-user.jpg' %>" alt="<%= c.teacher %>" 
               onerror="this.onerror=null; this.src='/assets/NOIMAGE.png';">
          <h4><%= c.teacher %></h4>
          <p>"<%= c.text %>"</p>
        </div>
      <% }) %>

      <div class="carousel-buttons">
        <button id="prevComment">&#10094;</button>
        <button id="nextComment">&#10095;</button>
      </div>
    </div>
  <% } %>

  <h2>Imágenes</h2>
<div class="project-images-carousel">
  <div class="project-images-track" id="project-images-track">
    <% project.images.forEach(img => { %>
      <img src="/assets/<%= img %>" alt="Imagen proyecto"
           onerror="this.onerror=null; this.src='/assets/NOIMAGE.png';">
    <% }) %>
  </div>
  <div class="images-carousel-buttons">
    <button id="prevImage">&#10094;</button>
    <button id="nextImage">&#10095;</button>
  </div>
</div>

<a href="/projects/<%= project.id %>/gallery" class="btn-gallery">Ver galería completa</a>

</div>

  
  <%- include('footer') %>
  <script src="/js/comments.js"></script>
  <script src="/js/images.js"></script>
</body>

</html>
